<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Repping It: Interactive Fitness Challenge | Gamified Workout Experience</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
    <!-- Add GSAP CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
    <meta name="description" content="Repping It transforms everyday activities into exciting fitness challenges. Roll the dice to determine your workout reps based on common occurrences in your day-to-day life. Stay active and motivated while turning mundane moments into fun exercise opportunities. Unleash your inner beast and make fitness a part of your daily routine!.">

    <meta name="keywords" content="Repping It,Fitness game,Home workouts,Active lifestyle,Exercise challenges,Fun fitness activities,Dice workout,Motivational fitness,Healthy living,Interactive exercise,Unique workout routines,Fitness tracker,Outdoor workouts,Home fitness challenges">

    <meta property="og:title" content="Repping It: Interactive Fitness Challenge | Gamified Workout Experience">
    <meta property="og:description" content="Repping It transforms everyday activities into exciting fitness challenges. Roll the dice to determine your workout reps based on common occurrences in your day-to-day life. Stay active and motivated while turning mundane moments into fun exercise opportunities. Unleash your inner beast and make fitness a part of your daily routine!.">
    <meta property="og:url" content="https://dean1234533.github.io/Repping-It">
    <meta property="og:type" content="website">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="canonical" href="https://dean1234533.github.io/Repping-It"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
   <style>
    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: Arial, sans-serif;
    }

    body {
        background: linear-gradient(135deg, #1a1a1a, #2c3e50);
        color: #fff;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        align-items: center;
        position: relative;
        overflow-x: hidden;
        touch-action: manipulation; /* Prevents zooming on double-tap */
    }

    .footer {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        color: white;
        font-size: small;
        width: 100%;
    }

    /* Add hover effect glow */
    .card:hover .card-inner {
        box-shadow: 0 0 25px rgba(179, 59, 46, 0.6);
    }
    
    /* Add this for shine effect */
    .card-shine {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 8px;
        background: linear-gradient(135deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0) 100%);
        opacity: 0;
        pointer-events: none;
        z-index: 10;
    }

    #timer {
        font-size: clamp(2rem, 5vw, 5rem);
        margin: 20px;
    }

    button {
        padding: 10px 20px;
        font-size: clamp(0.9rem, 2vw, 1.2rem);
        margin: 5px;
        cursor: pointer;
        border: none;
        border-radius: 8px;
        background-color: #e94f37;
        color: white;
        touch-action: manipulation; /* Better touch handling */
    }

    input {
        width: 80px;
        padding: 10px;
        font-size: clamp(0.9rem, 2vw, 1.2rem);
        text-align: center;
        margin: 5px;
        border-radius: 8px;
        border: 1px solid #ccc;
    }

    .footer-links {
        display: flex;
        flex-wrap: wrap;
        gap: clamp(10px, 2vw, 20px);
        color: #e3dede;
    }

    .footer-links a {
        color: rgb(234, 239, 231);
        text-decoration: none;
        font-weight: bold;
    }

    .container {
        max-width: 1200px;
        width: 90%; /* Changed from 100% to 90% */
        text-align: center;
        position: relative;
        z-index: 1;
        background: rgba(0, 0, 0, 0.5);
        border-radius: 20px;
        backdrop-filter: blur(10px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        padding: 20px;
        margin: 20px auto;
    }

    h1 {
        font-size: clamp(1.5rem, 5vw, 3rem);
        margin-bottom: 10px;
        text-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
        background: linear-gradient(to right, #fff, #ccc);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .controls {
        margin-top: 30px;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-wrap: wrap;
        gap: 20px;
    }

    select, button {
        background: rgba(255, 255, 255, 0.15);
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 25px;
        cursor: pointer;
        font-size: clamp(14px, 2vw, 16px);
        transition: all 0.3s ease;
    }

    button {
        background-color: #b33b2e;
    }

    button:hover {
        background: rgba(141, 42, 42, 0.25);
        transform: translateY(-3px);
    }

    button:active {
        transform: translateY(1px);
    }

    select:hover {
        background: rgba(255, 255, 255, 0.25);
    }

    .card-container {
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
        height: 350px;
        margin: 30px 0;
    }

    .card-stack {
        display: none;
        position: absolute;
        width: 100%;
        height: 100%;
        justify-content: center;
        align-items: center;
    }

    .card {
        display: none;
        perspective: 1000px;
        width: 224px;
        height: 336px;
        margin: 0 auto;
        position: relative; /* Added for gloss effect */
        overflow: hidden; /* Added for gloss effect */
    }

    .card-inner {
        position: relative;
        width: 100%;
        height: 100%;
        text-align: center;
        transition: transform 0.6s;
        transform-style: preserve-3d;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        border-radius: 8px;
        cursor: pointer;
    }

    .card-inner.flipped {
        transform: rotateY(180deg);
    }

    h1 {
        font-size: clamp(24px, 5vw, 48px);
    }

    h2 {
        font-size: clamp(20px, 4vw, 36px);
    }

    h3 {
        font-size: clamp(18px, 3.5vw, 30px);
    }

    p, ol, ul {
        font-size: clamp(14px, 2.5vw, 20px);
        line-height: 1.6;
    }

    .card-front, .card-back {
        position: absolute;
        width: 100%;
        height: 100%;
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        padding: 1px;
    }

    .card-front {
        background-image: url('IMG_4715.JPG'); /* Add background image */
        background-size: cover; /* Cover the entire card */
        background-position: center; /* Center the image */
        justify-content: center;
        align-items: center;
        color: rgb(230, 224, 224);
    }

    .card-front {
        display: flex;
        text-align: center;
        justify-content: center;
        background-color: #3498db;
        color: white;
        font-size: 14px;
        text-align: center;
    }

    .card-back {
        background-image: url('annie-spratt-6a3nqQ1YwBw-unsplash.jpg'); /* Add background image */
        background-size: cover; /* Cover the entire card */
        background-position: center; /* Center the image */
        display: grid;
        color: #f6eded;
        justify-content: center;
        text-align: center;
        line-height: 2px;
        transform: rotateY(180deg);
        font-size: 25px;
        padding-top: 2px;
        text-align: center;
    }

    /* Gloss Effect */
    .card:before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.1);
        background: linear-gradient(180deg, rgba(255, 255, 255, 0.1) 50%, rgba(255, 255, 255, 0) 100%);
        border-radius: 8px;
        opacity: 0.5; /* Adjust opacity for gloss */
        pointer-events: none; /* Prevents interfering with clicks */
    }

    .navigation {
        width: 100%;
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 20px;
        margin-bottom: 30px;  
    }

    .dice-container {
        margin-top: 30px;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 15px;
    }

    .dice {
        width: 80px;
        height: 80px;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    #diceImage {
        width: clamp(100px, 20vw, 200px);
        height: clamp(100px, 20vw, 200px);
        transition: transform 0.5s ease;
    }

    .rolling {
        animation: rollDice 0.5s ease-out 3;
    }

    @keyframes rollDice {
        0% { transform: rotate(0deg) scale(1); }
        50% { transform: rotate(180deg) scale(1.2); }
        100% { transform: rotate(360deg) scale(1); }
    }

    .dice-controls, .tally-controls {
        display: flex;
        justify-content: center;  
        gap: 15px;            
        margin: 20px 0;
        flex-wrap: wrap; /* Allow wrapping on small screens */
    }

    .stats {
        margin-top: 30px;       
        margin-bottom: 20px;    
        display: flex;
        justify-content: center;
        gap: 30px;
        font-size: clamp(14px, 2.5vw, 18px);
        flex-wrap: wrap; /* Allow wrapping on small screens */
    }

    /* Difficulty buttons container */
    .difficulty-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 20px;
        margin: 30px 0;          
    }

    .difficulty-title {
        font-size: clamp(16px, 3vw, 20px);
        margin-bottom: 10px;    
    }

    .difficulty-buttons {
        display: flex;
        justify-content: center;
        gap: 15px;              
        flex-wrap: wrap;
    }

    /* Style difficulty buttons differently */
    .difficulty-btn {
        padding: 12px 25px;
        border-radius: 25px;
        min-width: 120px;
        font-weight: bold;
        transition: all 0.3s ease;
    }

    .difficulty-btn.active {
        box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
        transform: scale(1.05);
    }

    .low-btn {
        background-color: #27ae60;  
    }

    .medium-btn {
        background-color: #f39c12;  
    }

    .high-btn {
        background-color: #e74c3c;  
    }

    /* Section dividers */
    .section-divider {
        width: 80%;
        height: 1px;
        background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.5), transparent);
        margin: 30px auto;
    }

    /* Modal Styles */
    .modal-header {
        background-color: #b33b2e; /* Same color as buttons */
        color: white;
    }

    /* Improved responsive styles */
    @media (max-width: 768px) {
        .controls, .difficulty-buttons {
            flex-direction: column;
            align-items: center;
        }
        
        .card {
            width: clamp(120px, 45vw, 160px);
            height: clamp(180px, 67.5vw, 240px);
        }
        
        .card-back-list {
            margin-top: -25px;
        }
        
        .dice {
            width: 60px;
            height: 60px;
        }
        
        p {
            margin-top: -10px;
        }
        
        #diceImage {
            width: clamp(80px, 40vw, 150px);
            height: clamp(80px, 40vw, 150px);
        }
        
        .stats {
            flex-direction: column;
            gap: 10px;
            align-items: center;
        }

        a {
            padding: 10px;
        }
        
        .container {
            width: 95%;
            padding: 15px 10px;
        }
        
        .card-container {
            height: clamp(250px, 70vw, 350px);
        }
    }
    
    /* Additional small device optimizations */
    @media (max-width: 480px) {
        .card {
            width: clamp(100px, 40vw, 140px);
            height: clamp(150px, 60vw, 210px);
        }
        
        .card-back {
            font-size: clamp(16px, 5vw, 25px);
        }
        
        .container {
            width: 98%;
            padding: 10px 5px;
        }
        
        button, select {
            padding: 8px 15px;
            font-size: clamp(12px, 3vw, 14px);
        }
        
        .difficulty-btn {
            min-width: 100px;
            padding: 8px 15px;
        }
        
        input {
            width: 60px;
            padding: 8px;
        }
    }
    
    /* Landscape mode optimizations */
    @media (max-height: 600px) and (orientation: landscape) {
        .card-container {
            height: 70vh;
        }
        
        .card {
            width: clamp(100px, 25vw, 170px);
            height: clamp(150px, 37.5vw, 255px);
        }
        
        .container {
            margin: 10px auto;
        }
        
        .dice-container {
            margin-top: 15px;
        }
        
        .section-divider {
            margin: 15px auto;
        }
        
        .difficulty-container {
            margin: 15px 0;
        }
        
        h1 {
            margin-bottom: 5px;
        }
    }
</style>
</head>
<body>
    <div class="container">
        <h1>Repping It: Fitness Card Game</h1>
        
        <div class="controls">
            <select id="stack-select">
                <option value="1">Home Work</option>
                <option value="3">Office Rep</option>
                <option value="4">Remote Flex</option>
                <option value="5">OutFit</option>
                <option value="6">Pyramid Hustle</option>
                <option value="2">Family Fun</option>
                <option value="7">Party Clash</option>
                <option value="8">Fit Parents</option>
                <option value="9">Time Crusher</option>
            </select>
            <button id="shuffle-btn">Shuffle Cards</button>
            <button id="game-rules-btn" data-bs-toggle="modal" data-bs-target="#rulesModal">Game Rules</button>
        </div>
    
        <div class="card-container">
            <!-- Home Workout -->
            <div id="stack1" class="card-stack">
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Laugh Out Loud</h3>
                            <p>Every time you hear a laugh</p><br><br>
                            <p>Do:<br> <a href="https://youtube.com/shorts/S0oc8-a1eoo" style="color: #b33b2e; text-decoration: underline;">Straight Leg Toe Touch</a></p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Call to Action</h3>
                            <p>Every time the phone rings</p><br><br>
                            <p>Do:<br> <a href="https://youtube.com/shorts/wKvR_B0Gbus" style="color: #b33b2e; text-decoration: underline;">Cross Jacks</a></p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>YouTube Ad App</h3>
                            <p>Every time YouTube ad appears</p><br><br>
                            <p>Do:<br> <a href="https://youtube.com/shorts/mI-4ppo3nD4" style="color: #b33b2e; text-decoration: underline;">Diamond Push Ups</a></p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Tweet and Tone</h3>
                            <p>Every time you see a bird</p><br><br>
                            <p>Do:<br> <a href="https://youtube.com/shorts/8r0k1cWA068" style="color: #b33b2e; text-decoration: underline;">Standing Side Crunch</a></p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Family Fun -->
            <div id="stack2" class="card-stack">
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>30 Day Fitness</h3><br>
                            <p>Do a short workout together (10-15 mins)<br> </p><br><br>
                            <div class="card-back-list"> 
                                <p><a href="https://youtube.com/shorts/uTbfBwpUftw" style="color: #b33b2e; text-decoration: underline;">Lightning Legs</a></p>
                                <p><a href="https://youtube.com/shorts/j588IjqLyok" style="color: #b33b2e; text-decoration: underline;">Captain Flutter</a></p>
                                <p><a href="https://youtube.com/shorts/vppEPyQpF-Q" style="color: #b33b2e; text-decoration: underline;">Jet Plank</a></p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Freeze Tag Fitness</h3>
                            <p>Freeze tag, but to unfreeze</p><br><br>
                            <p>Do: <br><a href="https://youtube.com/shorts/zbAcjZkZzHA" style="color: #b33b2e; text-decoration: underline;">Hand Walkout</a><br>& <br>Silly dance</p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>The Floor is Lava </h3>
                            <p>Everyone has 5 seconds to get off the floor</p><br><br>
                            <p>Last one off the floor does:<br> <a href="https://youtube.com/shorts/CrroLZeeLlU" style="color: #b33b2e; text-decoration: underline;">Plank Punches</a></p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Mirror Me</h3>
                            <p>The leader moves however they want, while the other mirrors them.(Dice number = number of moves)</p><br><br>
                            <p>Loser does: Silly Dance</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Office Workout -->
            <div id="stack3" class="card-stack">
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Inbox Intervals</h3>
                            <p>Every email notification</p><br><br>
                            <p>Do:<br> <a href="https://youtube.com/shorts/LxEvqzhY7Cw" style="color: #b33b2e; text-decoration: underline;">Chair Dips</a></p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Every Check In</h3>
                            <p>Every time you check your phone</p><br><br>
                            <p>Do:<br> <a href="https://youtube.com/shorts/OW3E2FhSjPg" style="color: #b33b2e; text-decoration: underline;">Calf Raises</a></p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Sip & Sweat</h3>
                            <p>Every coffee break</p><br><br>
                            <p>Do:<br> <a href="https://youtube.com/shorts/V47pG-zWjwA" style="color: #b33b2e; text-decoration: underline;">Wall Push Ups</a></p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Rise and Shine</h3>
                            <p>Every time you stand up</p><br><br>
                            <p>Do:<br> <a href="https://youtube.com/shorts/3bHwrNcx8ww" style="color: #b33b2e; text-decoration: underline;">Chair Squats</a></p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- TV Workout -->
            <div id="stack4" class="card-stack">
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Snack Attack Set</h3>
                            <p>For every snack you grab</p><br><br>
                            <p>Do:<br> <a href="https://youtube.com/shorts/Y-cvP_XZcQQ" style="color: #b33b2e; text-decoration: underline;">Ski Jumps</a></p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Closet Call</h3>
                            <p>Every time a character changes outfits</p><br><br>
                            <p>Do:<br> <a href="https://youtube.com/shorts/mI-4ppo3nD4" style="color: #b33b2e; text-decoration: underline;">Diamond Push Ups</a></p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Scroll & Sweat</h3>
                            <p>Every time you check social media</p><br><br>
                            <p>Do:<br> <a href="https://youtube.com/shorts/NSo7v8taJKw" style="color: #b33b2e; text-decoration: underline;">Crunches</a></p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Showtime Sweat</h3>
                            <p>For every new show that comes to netflix</p><br><br>
                            <p>Do:<br> <a href="https://youtube.com/shorts/56yOUm3WOZM" style="color: #b33b2e; text-decoration: underline;">Push Ups</a></p>
                        </div>
                    </div>
                </div>
            </div>
    
            <!-- Outdoor Workout -->
            <div id="stack5" class="card-stack">
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Delivery Driver Drop Set</h3>
                            <p>Every time you see a food delivery rider</p><br><br>
                            <p>Do:<br> <a href="https://youtube.com/shorts/vaQ8TuLpjdo" style="color: #b33b2e; text-decoration: underline;">Mountain Climbers</a></p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Pothole Pounder</h3>
                            <p>Each pothole you see</p><br><br>
                            <p>Do:<br> <a href="https://youtube.com/shorts/sghzl-NslKE" style="color: #b33b2e; text-decoration: underline;">Jump Squats</a></p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>L Plate Lifter</h3>
                            <p>Every car/bike with a L plate</p><br><br>
                            <p>Do:<br> <a href="https://youtube.com/shorts/QC1RKGE9wjc" style="color: #b33b2e; text-decoration: underline;">Lunges</a></p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Construction Crusher</h3>
                            <p>Each time you see roadworks</p><br><br>
                            <p>Do:<br> <a href="https://youtube.com/shorts/zzNwlVK_XPg" style="color: #b33b2e; text-decoration: underline;">Tuck Jumps</a></p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Pyramid Workout -->
            <div id="stack6" class="card-stack">
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Pyramid Sweat</h3><br>
                            <p>You start with 1 rep, go up to a peak (say 10), then back down to 1.</p><br><br>
                            <p>Reps based off dice roll, do:<br><br> <a href="https://youtube.com/shorts/AhunaH0K2VM" style="color: #b33b2e; text-decoration: underline;">Squats</a></p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Pyramid Sweat</h3><br>
                            <p>You start with 1 rep, go up to a peak (say 10), then back down to 1.</p><br><br>
                            <p>Reps based off dice roll, do:<br><br> <a href="https://youtube.com/shorts/56yOUm3WOZM" style="color: #b33b2e; text-decoration: underline;">Press Ups</a></p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Pyramid Sweat</h3><br>
                            <p>You start with 1 rep, go up to a peak (say 10), then back down to 1.</p><br><br>
                            <p>Reps based off dice roll, do:<br><br> <a href="https://youtube.com/shorts/-r0tnaEJsGw" style="color: #b33b2e; text-decoration: underline;">Burpees</a></p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Pyramid Sweat</h3><br>
                            <p>You start with 1 rep, go up to a peak (say 10), then back down to 1.</p><br><br>
                            <p>Reps based off dice roll, do:<br><br> <a href="https://youtube.com/shorts/YyO7WrwFo6M" style="color: #b33b2e; text-decoration: underline;">Sit Up</a></p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Party Power Challenges -->
            <div id="stack7" class="card-stack">
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Reverse Fitness</h3>
                            <p>
                                Move backwards! Lunges, crawls, burpees — but every move must be done in reverse. 
                                Roll the dice to see how many reverse moves you must complete. Mess up? Add 5 penalty situps!
                            </p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Dodge Drop</h3>
                            <p>
                                Keep moving until you hear "DROP!" — then hit the floor fast with a burpee or pushup.
                                Roll the dice to find out how many drops you must survive. Last to drop? Do 20 mountain climbers!
                            </p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Balance Battle</h3>
                            <p>
                                Stand on one leg! Roll the dice to set your balance time (seconds). Follow quick commands (clap, squat, touch ground) without falling. 
                                Last one balancing wins!
                            </p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Pulse Party</h3>
                            <p>
                                Pick a pulse move (bounce squats, jogging). Roll the dice to set your pulse reps. 
                                When the music drops — hit the floor in plank and pop back up fast!
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Parent Power Challenges -->
            <div id="stack8" class="card-stack">
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Nappy Ninja</h3>
                            <p> 
                                Every time you do a nappy change, drop and do 10 fast squats — ninja style! Bonus: Add a high jump if it's a messy one!
                            </p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Toy Tidy Toss</h3>
                            <p>
                                Every time you pick up toys off the floor, throw in 5 lunges for every toy! Power-up: Add a jump lunge every 5th toy.
                            </p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Snack Time Sizzler</h3>
                            <p>
                                Every time you prep a snack or feed the little one, hold a wall-sit for 30 seconds. Add 5 calf raises at the end to spice it up!
                            </p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Storybook Squats</h3>
                            <p>
                                During story time, do 1 squat for every page you read out loud! Bonus: Add a jump every time there's a funny sound or animal noise!
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="stack9" class="card-stack">
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Stair Climb Challenge</h3><br>
                            <p>Set a timer for 10 minutes and climb stairs continuously. Aim for maximum repetitions!</p><br><br>
                            <p>For added intensity, do:<br><br> Step Ups</p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Nature Walk Fitness Challenge</h3><br>
                            <p>Set a timer for 30 minutes and explore a natural area. Stop every 5 minutes to do 10 push-ups!</p><br><br>
                            <p>Mix it up with: <a href="https://youtube.com/shorts/QC1RKGE9wjc" style="color: #b33b2e; text-decoration: underline;">Alternating Lunges</a></p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Fitness Alphabet Challenge</h3><br>
                            <p>Set a timer for 20 minutes. Spell out a word using exercises (A=Arm Circles, B=Burpees). Complete the reps as you go!</p><br><br>
                            <p>For each letter do:<br><a href="https://youtube.com/shorts/wKvR_B0Gbus" style="color: #b33b2e; text-decoration: underline;">Cross Jacks</a></p>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>5-Minute Freestyle Challenge</h3><br>
                            <p>Set a timer for 5 minutes and perform any exercise you want. Switch it up every minute!</p><br><br>
                            <p>Try combining with:<br> <a href="https://youtube.com/shorts/F1nZSWab1aA" style="color: #b33b2e; text-decoration: underline;">High Knees</a></p>
                        </div>
                    </div>
                </div>
           
           
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>Split Time Challenge</h3><br>
                            <p>Set a timer for 20 minutes. Alternate between 2 minutes of high-intensity exercise and 2 minutes of low-intensity recovery.</p><br><br>
                            <p>For high intensity, do: <a href="https://youtube.com/shorts/-r0tnaEJsGw" style="color: #b33b2e; text-decoration: underline;">Burpees</a></p>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">Tap To Flip</div>
                        <div class="card-back">
                            <h3>15-Minute Circuit Countdown</h3><br>
                            <p>Set a timer for 15 minutes. Complete a circuit of exercises for 1 minute each, resting for 15 seconds between.</p><br><br>
                            <p>Include exercises like:<br><br> <a href="https://youtube.com/shorts/AhunaH0K2VM" style="color: #b33b2e; text-decoration: underline;">Squats</a></p>
                        </div>
                    </div>
                </div>
            </div>
         </div>
      

        
        


       
        
        <div class="navigation">
            <button id="prev-card-btn">Previous Card</button>
            <button id="next-card-btn">Next Card</button>
        </div>

        <div class="section-divider"></div>
        

        
        
        <!-- New Difficulty Selector -->
        <div class="difficulty-container">
            <div class="difficulty-title">Select Difficulty Level</div>
            <div class="difficulty-buttons">
                <button id="low-btn" class="difficulty-btn low-btn">Low</button>
                <button id="medium-btn" class="difficulty-btn medium-btn">Medium</button>
                <button id="high-btn" class="difficulty-btn high-btn">High</button>
            </div>
            <div id="difficulty-info">
                Current Level: Low (2, 4, 6, 8, 10 reps)
            </div>
        </div>
        
        <div class="section-divider"></div>
       
        <div class="dice-container">
            <div class="dice">
                <img id="diceImage" src="IMG_4702.PNG" alt="Dice" />
            </div>
            <div class="dice-controls">
                <button id="roll-dice-btn">Roll Dice</button>
                <button id="reset-dice-btn">Reset Dice</button>
            </div>
        </div>
        
        <div class="section-divider"></div>
        
        <div class="tally-controls">
            <button id="tally-btn">Add Tally</button>
            <button id="reset-tally-btn">Reset Tally</button>
        </div>
        
        <div class="stats">
            <div id="totalReps">Total Reps: 0</div>
            <div id="tallyCountDisplay">Tally Count: 0</div>
        </div>

        <div class="section-divider"></div>

        <div>
            <input type="number" id="minutes" placeholder="Min" min="0">
            <input type="number" id="seconds" placeholder="Sec" min="0" max="59">
        </div>
        <audio id="buzzer" src="digital-timer-beeping-epic-stock-media-1-00-08.mp3"></audio>
        <div id="timer">00:00</div>
        
        <div>
            <button onclick="startTimer()">Start</button>
            <button onclick="resetTimer()">Reset</button>
        </div>
        
        <!-- Buzzer sound -->
       
        
        
        
    
        <footer class="footer">
            <div class="footer-links">
        
             
        
        
                <a href="https://dbworkouts.co.uk/index.html" target="_blank">Website
                <img src="photo-output 7.PNG" style="color: white"alt="business logo" width="30">
              
    
              
        
           
            
               
            </div>
        </footer>
    </div>

   
    
    <!-- Modal for Game Rules -->
    <div class="modal fade" id="rulesModal" tabindex="-1" aria-labelledby="rulesModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="rulesModalLabel">Game Rules</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body"style="color:black">
                    <h6>Game Setup</h6>
                    <ol>
                        <li>Pick Your Daily Scenario (or let fate decide):
                            <p>Use the cards to randomly pick one or more of the following challenges each day. Then roll the dice to get your reps.</p>
                        </li>
                        <li>Track Your Reps: Use the in-game tally counter. At the end of the day, add up the total reps.</li>
                        <li>Finish Strong: Complete your reps at once or spread them throughout the day. The only rule is - get it done.</li>
                    </ol>
                    <h6>Warm-Up: "Ignite the Engine"</h6>
                    <p>Always warm up first to avoid injuries and get in the zone.</p>
                    <h6>Stretch it Out: "Cooldown Flow"</h6>
                    <p>After completing your reps, cool down and stretch to reduce soreness.</p>
                    <h6>Final Word</h6>
                    <p>Repping It isn't just a workout - it's a lifestyle challenge. You'll never watch TV, walk to the shop, or scroll through YouTube the same way again.</p>
                </div>
            </div>
        </div>
    </div>

    <script>


   
        // Add shine element to each card
const cards = document.querySelectorAll('.card');
cards.forEach(card => {
    const shine = document.createElement('div');
    shine.className = 'card-shine';
    card.appendChild(shine);
    
    // Initialize GSAP for each card
    initCardAnimation(card);
});

// Function to initialize 3D card animations
function initCardAnimation(card) {
    const cardInner = card.querySelector('.card-inner');
    const shine = card.querySelector('.card-shine');
    
    // Check if card is already flipped from previous state
    if (cardInner.getAttribute('data-flipped') === 'true' || 
        cardInner.classList.contains('flipped')) {
        
        // Ensure consistent state
        cardInner.classList.add('flipped');
        cardInner.setAttribute('data-flipped', 'true');
        cardInner.style.transform = 'rotateY(180deg)';
    }
    
    // Add mouseenter/mousemove for 3D tilt effect (but only when not flipped)
    card.addEventListener('mousemove', (e) => {
        // Check current flipped state before applying tilt
        const isFlipped = cardInner.classList.contains('flipped') || 
                         cardInner.getAttribute('data-flipped') === 'true';
        
        if (isFlipped) return;
        
        const rect = card.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;
        const mouseX = e.clientX - centerX;
        const mouseY = e.clientY - centerY;
        
        // Calculate rotation angles
        const rotateY = mouseX * 0.1; // Adjust for sensitivity
        const rotateX = -mouseY * 0.1; // Negative for correct direction
        
        // Animate with GSAP
        gsap.to(cardInner, {
            rotationY: rotateY,
            rotationX: rotateX,
            duration: 0.3,
            ease: "power2.out"
        });
        
        // Animate shine effect
        const angle = Math.atan2(mouseY, mouseX);
        const distance = Math.sqrt(mouseX * mouseX + mouseY * mouseY);
        const normalizedDistance = Math.min(distance / (rect.width / 2), 1);
        
        gsap.to(shine, {
            opacity: 0.3 * normalizedDistance,
            duration: 0.3
        });
    });
    
    // Reset on mouse leave
    card.addEventListener('mouseleave', () => {
        // Check current flipped state before resetting
        const isFlipped = cardInner.classList.contains('flipped') || 
                         cardInner.getAttribute('data-flipped') === 'true';
        
        if (isFlipped) return;
        
        gsap.to(cardInner, {
            rotationY: 0,
            rotationX: 0,
            duration: 0.5,
            ease: "elastic.out(1, 0.5)"
        });
        
        gsap.to(shine, {
            opacity: 0,
            duration: 0.3
        });
    });
    
    // We'll handle the click event with event delegation in the main code
}

// Main document ready function
document.addEventListener('DOMContentLoaded', () => {
    // Store global elements
    window.gameElements = {};
    
    // Store UI elements with null checks
    const elements = [
        'shuffle-btn', 'roll-dice-btn', 'reset-dice-btn', 'tally-btn', 
        'reset-tally-btn', 'prev-card-btn', 'next-card-btn', 'stack-select', 
        'diceImage', 'totalReps', 'tallyCountDisplay', 'difficulty-info'
    ];
    
    elements.forEach(id => {
        window.gameElements[id] = document.getElementById(id);
    });
    
    // Destructure for easier access
    const {
        'shuffle-btn': shuffleBtn, 
        'roll-dice-btn': rollDiceBtn,
        'reset-dice-btn': resetDiceBtn,
        'tally-btn': tallyBtn,
        'reset-tally-btn': resetTallyBtn,
        'prev-card-btn': prevCardBtn,
        'next-card-btn': nextCardBtn,
        'stack-select': stackSelect,
        'diceImage': diceImage,
        'totalReps': totalRepsDisplay,
        'tallyCountDisplay': tallyCountDisplay,
        'difficulty-info': difficultyInfo
    } = window.gameElements;
    
    // Difficulty buttons
    const lowBtn = document.getElementById('low-btn');
    const mediumBtn = document.getElementById('medium-btn');
    const highBtn = document.getElementById('high-btn');
    
    let currentCardIndex = 0;
    let totalReps = 0;
    let tallyCount = 0;
    let currentStackId = 'stack1'; // Start with Stack 1 selected
    
    // Difficulty levels and their rep values
    const difficultyLevels = {
        low: {
            name: 'Low',
            reps: [2, 4, 6, 8, 10],
            color: '#27ae60'
        },
        medium: {
            name: 'Medium',
            reps: [4, 8, 12, 16, 20, 24],
            color: '#f39c12'
        },
        high: {
            name: 'High',
            reps: [5, 10, 15, 20, 25, 30],
            color: '#e74c3c'
        }
    };
    
    let currentDifficulty = 'low'; // Default difficulty
    
    // Dice images array for dice animation
    const diceImages = [
        'IMG_4702.PNG',
        'IMG_4702.PNG',
        'IMG_4702.PNG',
        'IMG_4702.PNG',
        'IMG_4702.PNG',
        'IMG_4702.PNG'
    ];

    // Function to show only the current card in the active stack
    function showCurrentCard() {
        if (!currentStackId) return;
        
        const cardsInCurrentStack = document.querySelectorAll(`#${currentStackId} .card`);
        
        cardsInCurrentStack.forEach((card, index) => {
            if (index === currentCardIndex) {
                card.style.display = 'block';
            } else {
                card.style.display = 'none';
            }
        });
    }
    
    // Function to show a stack
    function showStack(stackId) {
        document.querySelectorAll('.card-stack').forEach(stack => {
            stack.style.display = 'none';
        });
        
        const selectedCardStack = document.getElementById(stackId);
        if (selectedCardStack) {
            selectedCardStack.style.display = 'flex';
            currentCardIndex = 0;
            showCurrentCard();
        }
    }
    
    // Function to update difficulty info
    function updateDifficultyInfo() {
        const level = difficultyLevels[currentDifficulty];
        difficultyInfo.textContent = `Current Level: ${level.name} (${level.reps.join(', ')} reps)`;
        
        // Reset active state for all buttons
        lowBtn.classList.remove('active');
        mediumBtn.classList.remove('active');
        highBtn.classList.remove('active');
        
        // Set active state for current difficulty
        if (currentDifficulty === 'low') {
            lowBtn.classList.add('active');
        } else if (currentDifficulty === 'medium') {
            mediumBtn.classList.add('active');
        } else if (currentDifficulty === 'high') {
            highBtn.classList.add('active');
        }
    }

    // Show Stack 1 initially
    showStack(currentStackId);
    
    // Set default difficulty
    updateDifficultyInfo();

    // Show the selected card stack
    if (stackSelect) {
        stackSelect.addEventListener('change', (event) => {
            const selectedStack = event.target.value;
            currentStackId = `stack${selectedStack}`;
            showStack(currentStackId);
        });
    }

    // Key function: Use event delegation for card flipping
    // This ensures the flip functionality works even after shuffling
    document.addEventListener('click', (event) => {
        const cardInner = event.target.closest('.card-inner');
        if (cardInner) {
            // Toggle the flipped class
            const isCurrentlyFlipped = cardInner.classList.contains('flipped');
            cardInner.classList.toggle('flipped');
            
            // Store the flipped state in a data attribute for persistence
            cardInner.setAttribute('data-flipped', !isCurrentlyFlipped);
            
            // Add style directly to ensure proper flipping
            if (!isCurrentlyFlipped) {
                // Flip to back
                cardInner.style.transform = 'rotateY(180deg)';
                
                // Apply GSAP animation for smooth effect
                gsap.to(cardInner, {
                    rotationY: 180,
                    duration: 0.6,
                    ease: "back.out(1.5)"
                });
            } else {
                // Flip to front
                cardInner.style.transform = 'rotateY(0deg)';
                
                // Apply GSAP animation for smooth effect
                gsap.to(cardInner, {
                    rotationY: 0,
                    duration: 0.6,
                    ease: "back.out(1.5)"
                });
            }
            
            // Stop event propagation to prevent multiple flips
            event.stopPropagation();
        }
    });

    // Function to shuffle cards
    const shuffleCards = () => {
        if (!currentStackId) {
            alert("Please select a stack first!");
            return;
        }
        
        const activeStack = document.getElementById(currentStackId);
        if (!activeStack) return;
        
        const cards = Array.from(activeStack.querySelectorAll('.card'));
        
        // First, properly store the content of each card to preserve during shuffle
        const cardContents = cards.map(card => {
            return {
                html: card.innerHTML,
                isFlipped: card.querySelector('.card-inner')?.classList.contains('flipped') || false
            };
        });
        
        // Shuffle the card contents array
        for (let i = cardContents.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [cardContents[i], cardContents[j]] = [cardContents[j], cardContents[i]];
        }
        
        // Update the cards with shuffled content - retain their flipped states
        cards.forEach((card, index) => {
            // Reset the card content
            card.innerHTML = cardContents[index].html;
            
            // Re-add shine element
            const shine = document.createElement('div');
            shine.className = 'card-shine';
            card.appendChild(shine);
            
            // Get the new card inner
            const cardInner = card.querySelector('.card-inner');
            
            // Reset the flipped state to what was stored - important for persistence
            if (cardContents[index].isFlipped && cardInner) {
                cardInner.classList.add('flipped');
                cardInner.setAttribute('data-flipped', 'true');
                cardInner.style.transform = 'rotateY(180deg)';
            } else if (cardInner) {
                cardInner.classList.remove('flipped');
                cardInner.setAttribute('data-flipped', 'false');
                cardInner.style.transform = 'rotateY(0deg)';
            }
        });
        
        currentCardIndex = 0;
        showCurrentCard();
        
        // Re-initialize the animation for all cards
        cards.forEach(card => {
            initCardAnimation(card);
        });
        
        // Save current card index to localStorage
        localStorage.setItem('currentCardIndex', '0');
    };

    // Navigate to previous card
    if (prevCardBtn) {
        prevCardBtn.addEventListener('click', () => {
            const cardsInCurrentStack = document.querySelectorAll(`#${currentStackId} .card`);
            
            if (currentCardIndex > 0) {
                currentCardIndex--;
                showCurrentCard();
            } else if (cardsInCurrentStack.length > 0) {
                // Wrap around to the last card
                currentCardIndex = cardsInCurrentStack.length - 1;
                showCurrentCard();
            }
        });
    }

    // Navigate to next card
    if (nextCardBtn) {
        nextCardBtn.addEventListener('click', () => {
            const cardsInCurrentStack = document.querySelectorAll(`#${currentStackId} .card`);
            
            if (currentCardIndex < cardsInCurrentStack.length - 1) {
                currentCardIndex++;
                showCurrentCard();
            } else if (cardsInCurrentStack.length > 0) {
                // Wrap around to the first card
                currentCardIndex = 0;
                showCurrentCard();
            }
        });
    }

    // Responsive handling for different devices
    function handleResize() {
        const cardContainer = document.querySelector('.card-container');
        if (!cardContainer) return;
        
        const viewport = {
            width: window.innerWidth,
            height: window.innerHeight
        };
        
        // Adjust card size based on viewport
        if (viewport.width < 768) {
            // Mobile devices
            cardContainer.style.width = '90vw';
            cardContainer.style.height = '60vh';
        } else if (viewport.width < 1024) {
            // Tablets
            cardContainer.style.width = '80vw';
            cardContainer.style.height = '65vh';
        } else {
            // Desktop
            cardContainer.style.width = '70vw';
            cardContainer.style.height = '70vh';
        }
        
        // Landscape mode specific adjustments
        if (viewport.width > viewport.height) {
            cardContainer.style.height = '70vh';
            
            // For small screens in landscape, make cards smaller
            if (viewport.height < 600) {
                cardContainer.style.height = '60vh';
            }
        }
        
        // Adjust card font sizes
        const cards = document.querySelectorAll('.card');
        cards.forEach(card => {
            const cardFront = card.querySelector('.card-front');
            const cardBack = card.querySelector('.card-back');
            
            if (viewport.width < 768) {
                // Smaller font on mobile
                if (cardFront) cardFront.style.fontSize = '1.2rem';
                if (cardBack) cardBack.style.fontSize = '1rem';
            } else {
                // Normal font on larger screens
                if (cardFront) cardFront.style.fontSize = '1.5rem';
                if (cardBack) cardBack.style.fontSize = '1.2rem';
            }
        });
    }
    
    // Handle device orientation and resize events
    window.addEventListener('resize', handleResize);
    window.addEventListener('orientationchange', () => {
        // Short delay to allow orientation to complete
        setTimeout(handleResize, 300);
    });
    
    // Initialize responsive layout
    handleResize();

    // Function to roll the dice with animation
    const rollDice = () => {
        if (!rollDiceBtn) return;
        
        // Disable roll button during animation
        rollDiceBtn.disabled = true;
        
        // Add rolling animation
        if (diceImage) {
            diceImage.classList.add('rolling');
            
            // Quick animation of changing dice faces
            let rollCount = 0;
            const rollInterval = setInterval(() => {
                const randomDiceValue = Math.floor(Math.random() * 6);
                diceImage.src = diceImages[randomDiceValue];
                rollCount++;
                
                if (rollCount >= 10) {
                    clearInterval(rollInterval);
                    
                    // Final dice value (1-6)
                    const diceRoll = Math.floor(Math.random() * 6) + 1;
                    diceImage.src = diceImages[diceRoll - 1];
                    
                    // Get rep count based on difficulty level
                    const level = difficultyLevels[currentDifficulty];
                    const repIndex = Math.min(diceRoll - 1, level.reps.length - 1);
                    const repCount = level.reps[repIndex];
                    
                    // Update total reps
                    totalReps += repCount;
                    if (totalRepsDisplay) {
                        totalRepsDisplay.textContent = `Total Reps: ${totalReps}`;
                    }
                    
                    // Remove rolling animation
                    setTimeout(() => {
                        diceImage.classList.remove('rolling');
                        rollDiceBtn.disabled = false;
                    }, 500);
                }
            }, 100);
        }
    };

    // Function to reset the dice
    const resetDice = () => {
        totalReps = 0;
        if (totalRepsDisplay) {
            totalRepsDisplay.textContent = `Total Reps: ${totalReps}`;
        }
        if (diceImage && diceImages.length > 5) {
            diceImage.src = diceImages[5]; // Set to dice-6.png
        }
    };

    // Function to increment tally
    const incrementTally = () => {
        tallyCount++;
        if (tallyCountDisplay) {
            tallyCountDisplay.textContent = `Tally Count: ${tallyCount}`;
        }
    };

    // Function to reset tally
    const resetTally = () => {
        tallyCount = 0;
        if (tallyCountDisplay) {
            tallyCountDisplay.textContent = `Tally Count: ${tallyCount}`;
        }
    };

    // Difficulty button event listeners
    if (lowBtn) {
        lowBtn.addEventListener('click', () => {
            currentDifficulty = 'low';
            updateDifficultyInfo();
        });
    }
    
    if (mediumBtn) {
        mediumBtn.addEventListener('click', () => {
            currentDifficulty = 'medium';
            updateDifficultyInfo();
        });
    }
    
    if (highBtn) {
        highBtn.addEventListener('click', () => {
            currentDifficulty = 'high';
            updateDifficultyInfo();
        });
    }

    // Add event listeners for buttons
    if (shuffleBtn) {
        shuffleBtn.addEventListener('click', shuffleCards);
    }
    
    if (rollDiceBtn) {
        rollDiceBtn.addEventListener('click', rollDice);
    }
    
    if (resetDiceBtn) {
        resetDiceBtn.addEventListener('click', resetDice);
    }
    
    if (tallyBtn) {
        tallyBtn.addEventListener('click', incrementTally);
    }
    
    if (resetTallyBtn) {
        resetTallyBtn.addEventListener('click', resetTally);
    }
});

// Audio functionality for timer
let audioContext;

// Function to initialize audio context
function initAudioContext() {
    if (!audioContext) {
        audioContext = new (window.AudioContext || window.webkitAudioContext)();
    }
    
    // Resume audio context if it's suspended (browser policy requirement)
    if (audioContext.state === 'suspended') {
        audioContext.resume();
    }
}

// Initialize on page interaction to handle autoplay restrictions
document.addEventListener('click', initAudioContext);
document.addEventListener('touchstart', initAudioContext);

// Fallback beep using Web Audio API
function createBeep() {
    initAudioContext();
    
    const oscillator = audioContext.createOscillator();
    const gainNode = audioContext.createGain();
    
    oscillator.connect(gainNode);
    gainNode.connect(audioContext.destination);
    
    oscillator.type = 'square';
    oscillator.frequency.value = 800;
    gainNode.gain.value = 0.5;
    
    oscillator.start();
    
    // Beep for 0.3 seconds
    setTimeout(() => {
        oscillator.stop();
    }, 300);
}

// Function to reload and play sound
function playSound() {
    // Create new audio element each time instead of reusing
    const buzzer = new Audio('digital-timer-beeping-epic-stock-media-1-00-08.mp3');
    
    // Try to play the audio
    const playPromise = buzzer.play();
    
    if (playPromise !== undefined) {
        playPromise
            .then(() => {
                console.log("Buzzer sound played successfully");
            })
            .catch(error => {
                console.log("Error playing buzzer sound:", error);
                // Use Web Audio API as fallback
                createBeep();
            });
    }
}

let countdown;
let timeLeft = 0;

function startTimer() {
    clearInterval(countdown);

    const minutes = parseInt(document.getElementById('minutes').value) || 0;
    const seconds = parseInt(document.getElementById('seconds').value) || 0;

    timeLeft = (minutes * 60) + seconds;

    if (timeLeft <= 0) {
        alert("Please set a valid time!");
        return;
    }

    // Initialize audio context when timer starts
    initAudioContext();
    
    updateDisplay();

    countdown = setInterval(() => {
        timeLeft--;
        updateDisplay();

        if (timeLeft <= 0) {
            clearInterval(countdown);
            // Try both methods for maximum compatibility
            playSound();
            
            // Also try using the original buzzer element as backup
            const originalBuzzer = document.getElementById('buzzer');
            if (originalBuzzer) {
                originalBuzzer.currentTime = 0;
                originalBuzzer.play().catch(() => {
                    console.log("Backup method failed, already tried alternative");
                });
            }
        }
    }, 1000);
}

function updateDisplay() {
    const timerDisplay = document.getElementById('timer');
    if (!timerDisplay) return;
    
    const mins = Math.floor(timeLeft / 60);
    const secs = timeLeft % 60;

    timerDisplay.textContent = 
        `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
}

function resetTimer() {
    clearInterval(countdown);
    timeLeft = 0;
    
    const timerDisplay = document.getElementById('timer');
    if (timerDisplay) {
        timerDisplay.textContent = "00:00";
    }
    
    const minutesInput = document.getElementById('minutes');
    if (minutesInput) {
        minutesInput.value = "";
    }
    
    const secondsInput = document.getElementById('seconds');
    if (secondsInput) {
        secondsInput.value = "";
    }
    
    // Reset audio element when timer is reset
    const buzzer = document.getElementById('buzzer');
    if (buzzer) {
        buzzer.pause();
        buzzer.currentTime = 0;
    }
}

// Ensure the audio is properly set up
document.addEventListener('DOMContentLoaded', () => {
    // Set the src again to ensure it's properly loaded
    const buzzer = document.getElementById('buzzer');
    if (buzzer) {
        buzzer.src = 'digital-timer-beeping-epic-stock-media-1-00-08.mp3';
        buzzer.load();
    }
    
    // Attach event listeners to timer buttons
    const startTimerBtn = document.getElementById('start-timer-btn');
    if (startTimerBtn) {
        startTimerBtn.addEventListener('click', startTimer);
    }
    
    const resetTimerBtn = document.getElementById('reset-timer-btn');
    if (resetTimerBtn) {
        resetTimerBtn.addEventListener('click', resetTimer);
    }
    
    // Initialize cards for first load
    const cards = document.querySelectorAll('.card');
    cards.forEach(card => {
        // Add shine element if needed
        if (!card.querySelector('.card-shine')) {
            const shine = document.createElement('div');
            shine.className = 'card-shine';
            card.appendChild(shine);
        }
        
        // Initialize card animation
        initCardAnimation(card);
    });
    
    // Show the first card of the default stack
    showCurrentCard();
});

// Helper function to handle touch events
function enableTouchSupport() {
    // Prevent double-tap zoom
    let lastTouchEnd = 0;
    document.addEventListener('touchend', function(e) {
        const now = Date.now();
        if (now - lastTouchEnd <= 300) {
            e.preventDefault();
        }
        lastTouchEnd = now;
    }, {passive: false});
    
    // Convert touch events to mouse events for better compatibility
    document.addEventListener('touchstart', function(e) {
        // Only prevent default for interactive elements to maintain scrolling
        if (e.target.tagName === 'BUTTON' || 
            e.target.closest('.card-inner') || 
            e.target.closest('input')) {
            e.preventDefault();
        }
        
        // Map the first touch point to mousedown
        if (e.touches.length > 0) {
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent('mousedown', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            e.target.dispatchEvent(mouseEvent);
        }
    }, {passive: false});
    
    document.addEventListener('touchmove', function(e) {
        // Map the first touch point to mousemove
        if (e.touches.length > 0) {
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent('mousemove', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            e.target.dispatchEvent(mouseEvent);
        }
    }, {passive: true});
    
    document.addEventListener('touchend', function(e) {
        // Map to mouseup and click
        const mouseUpEvent = new MouseEvent('mouseup', {});
        document.dispatchEvent(mouseUpEvent);
        
        // Also dispatch a click event at the release point
        if (e.changedTouches.length > 0) {
            const touch = e.changedTouches[0];
            const clickEvent = new MouseEvent('click', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            
            // Find the element at this position
            const element = document.elementFromPoint(touch.clientX, touch.clientY);
            if (element) {
                element.dispatchEvent(clickEvent);
            }
        }
    }, {passive: true});
}

// Initialize touch support
enableTouchSupport();

// Global function to show current card (for external access)
function showCurrentCard() {
    // Get current stack ID from the visible stack or fallback to stack1
    const visibleStack = document.querySelector('.card-stack[style*="display: flex"]');
    const currentStackId = visibleStack?.id || 'stack1';
    if (!currentStackId) return;
    
    // Get the stored card index or use the global one
    let currentCardIndex = 0;
    if (typeof window.currentCardIndex !== 'undefined') {
        currentCardIndex = window.currentCardIndex;
    } else {
        currentCardIndex = parseInt(localStorage.getItem('currentCardIndex') || '0');
    }
    
    const cardsInCurrentStack = document.querySelectorAll(`#${currentStackId} .card`);
    
    // Handle case where index is out of bounds
    if (currentCardIndex >= cardsInCurrentStack.length && cardsInCurrentStack.length > 0) {
        currentCardIndex = 0;
    }
    
    // Update cards visibility
    cardsInCurrentStack.forEach((card, index) => {
        if (index === currentCardIndex) {
            card.style.display = 'block';
            
            // Ensure any flipped state is preserved
            const cardInner = card.querySelector('.card-inner');
            if (cardInner) {
                const isFlipped = cardInner.classList.contains('flipped') || 
                                 cardInner.getAttribute('data-flipped') === 'true';
                                 
                if (isFlipped) {
                    cardInner.classList.add('flipped');
                    cardInner.setAttribute('data-flipped', 'true');
                    cardInner.style.transform = 'rotateY(180deg)';
                }
            }
        } else {
            card.style.display = 'none';
        }
    });
    
    // Save current index
    localStorage.setItem('currentCardIndex', currentCardIndex.toString());
    window.currentCardIndex = currentCardIndex;
}
    </script>
</body>
</html>